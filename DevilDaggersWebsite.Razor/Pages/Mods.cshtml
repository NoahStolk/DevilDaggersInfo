@page
@model ModsModel
@using DevilDaggersWebsite.Razor.Utils
@using DevilDaggersWebsite.Razor.Pagination
@{
	ViewData["Title"] = "Mods";
}

<header>
	<h1>@ViewData["Title"]</h1>
</header>

<main role="main">
	<p>
		Here's a list of custom asset mods created by the community using <a asp-page="/Tools/DevilDaggersAssetEditor">Devil Daggers Asset Editor</a>. Read below for more information.
	</p>

	@{
		@await Html.PartialAsync("Partials/NavigationPartial", Model)

		<div class="navigation-result-wrapper">
			@if (Model.PaginatedList.Count > 0)
			{
				<table>
					<thead>
						<tr class="navigation-sort">
							<th width="500">
								<a asp-page="./Mods"
								   asp-route-searchAuthor="@Model.SearchAuthor"
								   asp-route-searchName="@Model.SearchName"
								   asp-route-sortOrder="@Model.Name"
								   asp-route-pageIndex="@Model.PageIndex">Name</a>
							</th>
							<th width="260">
								<a asp-page="./Mods"
								   asp-route-searchAuthor="@Model.SearchAuthor"
								   asp-route-searchName="@Model.SearchName"
								   asp-route-sortOrder="@Model.Author"
								   asp-route-pageIndex="@Model.PageIndex">Author(s)</a>
							</th>
							<th class="hidden-xs" width="220">
								<a asp-page="./Mods"
								   asp-route-searchAuthor="@Model.SearchAuthor"
								   asp-route-searchName="@Model.SearchName"
								   asp-route-sortOrder="@Model.Type"
								   asp-route-pageIndex="@Model.PageIndex">Type</a>
							</th>
							<th class="hidden-xs" width="220">
								<a asp-page="./Mods"
								   asp-route-searchAuthor="@Model.SearchAuthor"
								   asp-route-searchName="@Model.SearchName"
								   asp-route-sortOrder="@Model.Hosted"
								   asp-route-pageIndex="@Model.PageIndex">Hosted</a>
							</th>
							<th class="hidden-xs" width="220">
								<a asp-page="./Mods"
								   asp-route-searchAuthor="@Model.SearchAuthor"
								   asp-route-searchName="@Model.SearchName"
								   asp-route-sortOrder="@Model.Prohibited"
								   asp-route-pageIndex="@Model.PageIndex">Prohibited assets</a>
							</th>
						</tr>
					</thead>
					<tbody>
						@foreach (Mod mod in Model.PaginatedList)
						{
							<tr>
								<td><a asp-page="Mod" asp-route-mod="@mod.Name">@mod.Name</a></td>
								<td>
									@for (int i = 0; i < mod.Authors.Count; i++)
									{
										string author = mod.Authors[i];
										<a asp-page="/Mods" asp-route-SearchAuthor="@author">@author</a>
										if (i < mod.Authors.Count - 1)
										{
											<span>&amp;</span>
										}
									}
								</td>
								<td class="hidden-xs">
									@mod.AssetModTypes
								</td>
								<td class="hidden-xs">
									@(mod.IsHostedOnDdInfo ? "Yes" : "No")
								</td>
								<td class="hidden-xs">
									@(mod.ContainsAnyProhibitedAssets.HasValue ? mod.ContainsAnyProhibitedAssets.Value ? "Yes" : "No" : "Unknown")
								</td>
							</tr>
						}
					</tbody>
				</table>
			}
			else
			{
				@:Search returned no results
			}
		</div>
	}

	<h2>How to play mods</h2>
	<ol>
		<li>Download the files from a mod listed above.</li>
		<li>
			Navigate to the directory where Devil Daggers is installed.<br />
			By default, this is <span class="path">C:\Program Files (x86)\Steam\steamapps\common\devildaggers</span> on Windows.<br />
		</li>
		<li>Place the files you downloaded inside the "mods" folder. The file names MUST start with the name of the original file they target. This means that an audio mod (which replaces assets found in the "audio" file) needs to have the prefix "audio" in its file name. The same applies to "dd" and "core" mods. In case of particle mods, you will need to replace the <span class="path">devildaggers/dd/particle</span> file and keep the file name as it is.</li>
	</ol>
	<h3>Notes</h3>
	<ul>
		<li>Mods are loaded when Devil Daggers starts up, so you will need to restart the game when you want to play a different mod.</li>
	</ul>

	<h2>FAQ</h2>
	<div class="faq-question">Can I get banned for using mods?</div>
	<div class="faq-answer">No, you can only get banned manually by the developer for submitting illegitimate runs to the official leaderboard.</div>
	<div class="faq-question">Can I override my real score while playing a mod?</div>
	<div class="faq-answer">Yes, unless you have modified the <span class="path">devildaggers/dd/particle</span> file. Scores above 1000 also won't submit if the game detects prohibited mods (mods that give the player an unfair advantage).</div>
	<div class="faq-question">How do I make my own mods?</div>
	<div class="faq-answer">
		<ol>
			<li>Download <a asp-page="/Tools/DevilDaggersAssetEditor">DevilDaggersAssetEditor</a>.</li>
			<li>Check out the <a asp-page="/Wiki/Guides/AssetEditor">Asset Editor Guide</a>.</li>
		</ol>
	</div>
	<div class="faq-question">I've made my own mods that I want to share with the community. Can I get them listed on here?</div>
	<div class="faq-answer">Yes, let us know on <a href="@RazorUtils.DiscordUrl">Discord</a>.</div>
</main>

@section Styles {
	<link rel='stylesheet' href='~/styles/navigation.css' asp-append-version="true" />
}

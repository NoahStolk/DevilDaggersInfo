@page
@model DevilDaggersWebsite.Pages.Api.IndexModel
@using DevilDaggersWebsite.Code.Api
@{
	ViewData["Title"] = "API Overview";
}

<h1>@ViewData["Title"]</h1>

<main role="main">
	<p>
		This is the main page for the API for DevilDaggers.info.
		All API functions currently available can be found here.
	</p>
	<p>
		I mainly set this up so I could easily communicate with the website through external environments, such as within <a asp-page="/Tools/DevilDaggersSurvivalEditor">DevilDaggersSurvivalEditor</a> or Discord bots.
		However, this is a public API; feel free to use it for any tool or application you've made yourself.
		I'd also be happy to implement more functions should anyone need it, so let me know if you have any requests.
	</p>
	<p>
		This table is automatically generated and will always be up to date.
	</p>

	<h2>List of functions</h2>
	<p>
		Here is the list containing all currently available API functions, including all their parameters.
	</p>
	<p>
		The <span class="api-parameter-type">type</span> for each parameter is also shown below, and <span class="api-parameter-optional">optional parameters</span> have their <span class="api-parameter-default-value">default value</span> listed as well.
	</p>
	<div class="api-list">
		<div class="row text-bold">
			<div class="col-lg-3 col-md-3 col-sm-6 col-xs-6">Name</div>
			<div class="col-lg-3 col-md-3 col-sm-6 col-xs-6">Return type</div>
			<div class="col-lg-3 col-md-3 hidden-sm hidden-xs">Parameters</div>
			<div class="col-lg-3 col-md-3 hidden-sm hidden-xs">Status codes</div>
		</div>

		@{
			foreach (Endpoint endpoint in Model.Endpoints)
			{
				<div class="row">
					<div class="col-lg-2 col-md-2 col-sm-3 col-xs-3"><a asp-page=@endpoint.Url class="dont-break-out">@endpoint.Url</a></div>
					<div class="col-lg-2 col-md-2 hidden-sm hidden-xs">@endpoint.ReturnType</div>
					<div class="col-lg-2 col-md-2 hidden-sm hidden-xs">@string.Join(", ", endpoint.Parameters.Select(p => p.Name))</div>
					<div class="col-lg-4 col-md-6 col-sm-9 col-xs-9">@string.Join(", ", endpoint.StatusCodes)</div>
				</div>
			}
		}
	</div>
</main>

@section Styles {
	<link rel='stylesheet' href='~/styles/api.css' />
}
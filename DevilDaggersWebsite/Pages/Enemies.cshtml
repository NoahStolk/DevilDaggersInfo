@page
@model DevilDaggersWebsite.Pages.EnemiesModel
@using DevilDaggersWebsite.Utils
@using DevilDaggersWebsite.Models.Game
@{
	string boxShadow = "0 0px 2px 2px";
	ViewData["Title"] = "Enemies";
	GameHelper.Squid1.Info = new List<string>
{
"Spawns at the edge of the arena",
"Moves slowly and rotates clockwise",
"Spawns 10 Skull Is and 1 Skull II every 20 seconds (starting 3 seconds after its initial appearance)"
};
	GameHelper.Squid2.Info = new List<string>
{
"Spawns at the edge of the arena",
"Moves slowly and rotates clockwise",
"Spawns 10 Skull Is and 1 Skull III every 20 seconds (starting 3 seconds after its initial appearance)"
};
	GameHelper.Squid3.Info = new List<string>
{
"Spawns at the edge of the arena",
"Moves slowly and rotates clockwise",
"Spawns 15 Skull Is and 1 Skull IV every 20 seconds (starting 3 seconds after its initial appearance)"
};
	GameHelper.Centipede.Info = new List<string>
{
"Emerges and flies idly for a while, then starts chasing the player",
"Regularly dives down and moves underground for a while"
};
	GameHelper.Gigapede.Info = new List<string>
{
"Emerges and starts chasing the player immediately"
};
	GameHelper.Ghostpede.Info = new List<string>
{
"Emerges and starts flying in circles high above the arena",
"Attracts and consumes all homing daggers, making them useless"
};
	GameHelper.Leviathan.Info = new List<string>
{
"Attracts and transmutes all skulls every 20 seconds",
"Rotates counter-clockwise",
"Drops The Orb after dying"
};
	GameHelper.Thorn.Info = new List<string>
{
"Takes up space"
};
	GameHelper.Spider1.Info = new List<string>
{
"Spawns at the edge of the arena and starts lifting its head, then faces the player",
"Attracts and consumes gems when facing the player, ejecting them as Spider Egg I one at a time",
"Hides its head when shot and left unharmed for 1 second",
"Begins moving randomly in an unpredictable jittery fashion after initially raising its head"
};
	GameHelper.Spider2.Info = new List<string>
{
"Spawns at the edge of the arena and starts lifting its head (though much slower than Spider I), then faces the player",
"Attracts and consumes gems when facing the player, ejecting them as Spider Egg II one at a time",
"Hides its head when shot and left unharmed for 1 second",
"Begins moving randomly in an unpredictable jittery fashion after initially raising its head (though barely noticeable due to its size)"
};
	GameHelper.Skull1.Info = new List<string>
{
"Slowly chases the player"
};
	GameHelper.Skull2.Info = new List<string>
{
"Moves randomly"
};
	GameHelper.Skull3.Info = new List<string>
{
"Chases the player fast"
};
	GameHelper.Skull4.Info = new List<string>
{
"Chases the player fast"
};
	GameHelper.TransmutedSkull1.Info = new List<string>
{
"Slowly chases the player"
};
	GameHelper.TransmutedSkull2.Info = new List<string>
{
"Moves randomly"
};
	GameHelper.TransmutedSkull3.Info = new List<string>
{
"Chases the player fast"
};
	GameHelper.TransmutedSkull4.Info = new List<string>
{
"Chases the player fast"
};
	GameHelper.SpiderEgg1.Info = new List<string>
{
"Hatches into 5 Spiderlings after 10 seconds"
};
	GameHelper.SpiderEgg2.Info = new List<string>
{
"Hatches into 5 Spiderlings after 10 seconds"
};
	GameHelper.Spiderling.Info = new List<string>
{
"Darts towards the player in bursts with random offsets"
};
	GameHelper.TheOrb.Info = new List<string>
{
"Behaves like an eyeball, will look at the player, then attract and transmute all skulls every 2.5 seconds",
"Becomes stunned under constant fire, cannot look or attract skulls while stunned"
};
}

<header>
	<h1>@ViewData["Title"]</h1>
</header>

<main role="main">
	<h2 class="text-center hidden-xs">Summary</h2>
	<div class="">
		<div class="flex-container flex-center hidden-xs" style="flex-direction: column; max-width: 960px; margin-left: auto; margin-right: auto;">
			<div class="enemies-summary-row-top flex-container">
				<div>Enemy</div>
				<div>HP</div>
				<div>Gems</div>
				<div>Death type</div>
				<div>Spawned by</div>
			</div>
			@foreach (Enemy enemy in GameHelper.Enemies)
			{
				<div class="enemies-summary-row-top flex-container">
					<div>@Html.Raw(RazorUtils.GetEnemyLayoutAnchor(enemy))</div>
					<div class='text-right'>@enemy.HP</div>
					<div class='text-right'>@enemy.Gems</div>
					<div style='color: #@enemy.Death.ColorCode'>@enemy.Death.Name</div>
					<div>
						@if (enemy.SpawnedBy.Length == 0)
						{
							@:Game
						}
						else
						{
							foreach (Enemy e in enemy.SpawnedBy)
							{
								@Html.Raw(RazorUtils.GetEnemyLayoutAnchor(e) + " ")
							}
						}
					</div>
				</div>
			}
		</div>
	</div>

	<h2 class="text-center">Details</h2>
	<div class="flex-container flex-center enemy-container">
		@foreach (Enemy enemy in GameHelper.Enemies)
		{
			<div class="enemy" id="@(enemy.Name.Replace(" ", string.Empty))" style="-webkit-box-shadow: @boxShadow #@(enemy.ColorCode); -moz-box-shadow: @boxShadow #@(enemy.ColorCode); box-shadow: @boxShadow #@(enemy.ColorCode);">
				<div class="enemy-row flex-container">
					<div>Enemy</div>
					<div class="text-right" style='color: #@enemy.ColorCode'>@enemy.Name</div>
				</div>
				<div class="enemy-row flex-container">
					<div>Image</div>
					<div><img class="img-responsive pull-right" src='~/Images/Enemies/@(enemy.Name).jpg' /></div>
				</div>
				<div class="enemy-row flex-container">
					<div>HP</div>
					<div class="text-right">@enemy.HP @((enemy.HitPartCount != 1) ? "(" + enemy.HP / enemy.HitPartCount + " x " + enemy.HitPartCount + ")" : "")</div>
				</div>
				<div class="enemy-row flex-container">
					<div>Gems</div>
					<div class="text-right">@enemy.Gems</div>
				</div>
				<div class="enemy-row flex-container">
					<div>Death type</div>
					<div class="text-right" style='color: #@enemy.Death.ColorCode'>@enemy.Death.Name</div>
				</div>
				<div class="enemy-row flex-container">
					<div>Spawned by</div>
					<div class="text-right">
						@if (enemy.SpawnedBy.Length == 0)
						{
							<span style='color: #DDDDDD;'>Game</span>
						}
						else
						{
							foreach (Enemy e in enemy.SpawnedBy)
							{
								<span>@Html.Raw(RazorUtils.GetEnemyLayoutAnchor(e))</span>
							}
						}
					</div>
				</div>
				<div class="enemy-row flex-container">
					<div>Behaviour</div>
					<div>
						<ul>
							@for (int i = 0; i < enemy.Info.Count; i++)
							{
								<li>
									@Html.Raw(RazorUtils.GetLayout(enemy.Info[i]))
								</li>
							}
						</ul>
					</div>
				</div>
			</div>
		}
	</div>

	<h2 class="text-center">Damage Stats</h2>
	<p class="text-center">All of this information assumes 100% shot accuracy, and may not be relevant in some cases.</p>
	<div class="flex-container flex-center" style="flex-direction: column;">
		<div class="damage-stats-row-top flex-container">
			<div>Enemy</div>
			<div>Spray (seconds)</div>
			<div>Shots</div>
			<div>Homing daggers</div>
		</div>
		<div class="damage-stats-row flex-container hidden-xs">
			<div>Name</div>
			<div>HP</div>
			@{
				for (int i = 0; i < 3; i++)
				{
					foreach (Upgrade upgrade in GameHelper.Upgrades)
					{
						if (i != 2 || (i == 2 && upgrade.HomingShot != null))
						{
							<div class="hidden-sm hidden-md">
								@Html.Raw(RazorUtils.GetUpgradeLayoutAnchor(upgrade))
							</div>
						}
					}
				}
			}
		</div>
		@foreach (Enemy enemy in GameHelper.Enemies)
		{
			<div class="damage-stats-row damage-stats-row-main flex-container hidden-xs">
				<div>@Html.Raw(RazorUtils.GetEnemyLayoutAnchor(enemy))</div>
				<div class="text-right">@enemy.HP</div>
				@for (int i = 0; i < 3; i++)
				{
					foreach (Upgrade upgrade in GameHelper.Upgrades)
					{
						switch (i)
						{
							case 0:
								<div class="hidden-sm hidden-md text-right">@string.Format(RazorUtils.DEFAULT_CULTURE, "{0:0.0000}", enemy.HP / upgrade.DefaultSpray)</div>
								break;
							case 1:
								<div class="hidden-sm hidden-md text-right">@Math.Ceiling(enemy.HP / upgrade.DefaultShot)</div>
								break;
							case 2:
								if (upgrade.Level == 3)
								{
									<div class="hidden-sm hidden-md text-right">@(enemy.Homing3 == null ? "N/A" : string.Format(RazorUtils.DEFAULT_CULTURE, "{0:0.##}", (double)enemy.Homing3))</div>
								}
								else if (upgrade.Level == 4)
								{
									<div class="hidden-sm hidden-md text-right">@(enemy.Homing4 == null ? "N/A" : string.Format(RazorUtils.DEFAULT_CULTURE, "{0:0.##}", (double)enemy.Homing4))</div>
								}
								break;
						}
					}
				}

				@foreach (Upgrade upgrade in GameHelper.Upgrades)
				{
					<div class="hidden-lg text-right">
						@Html.Raw(RazorUtils.GetUpgradeLayoutAnchor(upgrade))
					</div>
				}
			</div>

			<div class="visible-xs">
				<div class="damage-stats-row damage-stats-row-main flex-container">
					<div>Name</div>
					<div class="text-right">@Html.Raw(RazorUtils.GetEnemyLayoutAnchor(enemy))</div>
				</div>
				<div class="damage-stats-row flex-container">
					<div>HP</div>
					<div class="text-right">@enemy.HP</div>
				</div>

				@for (int i = 0; i < 3; i++)
				{
					foreach (Upgrade upgrade in GameHelper.Upgrades)
					{
						switch (i)
						{
							case 0:
								<div class="damage-stats-row flex-container">
									<div>@Html.Raw(RazorUtils.GetUpgradeLayoutAnchor(upgrade)) spray (seconds)</div>
									<div class="text-right">@string.Format(RazorUtils.DEFAULT_CULTURE, "{0:0.0000}", enemy.HP / upgrade.DefaultSpray)</div>
								</div>
								break;
							case 1:
								<div class="damage-stats-row flex-container">
									<div>@Html.Raw(RazorUtils.GetUpgradeLayoutAnchor(upgrade)) shots</div>
									<div class="text-right">@Math.Ceiling(enemy.HP / upgrade.DefaultShot)</div>
								</div>
								break;
							case 2:
								<div class="damage-stats-row flex-container">
									@if (upgrade.Level == 3)
									{
										<div>@Html.Raw(RazorUtils.GetUpgradeLayoutAnchor(upgrade)) homing daggers</div>
										<div class="text-right">@(enemy.Homing3 == null ? "N/A" : string.Format(RazorUtils.DEFAULT_CULTURE, "{0:0.##}", (double)enemy.Homing3))</div>
									}
									else if (upgrade.Level == 4)
									{
										<div>@Html.Raw(RazorUtils.GetUpgradeLayoutAnchor(upgrade)) homing daggers</div>
										<div class="text-right">@(enemy.Homing4 == null ? "N/A" : string.Format(RazorUtils.DEFAULT_CULTURE, "{0:0.##}", (double)enemy.Homing4))</div>
									}
								</div>
								break;
						}
					}
				}
			</div>

			@for (int i = 0; i < 3; i++)
			{
				<div class="damage-stats-row flex-container hidden-xs hidden-lg">
					<div>@(i == 0 ? "Spray (seconds)" : i == 1 ? "Shots" : "Homing daggers")</div>
					<div></div>
					@foreach (Upgrade upgrade in GameHelper.Upgrades)
					{
						switch (i)
						{
							case 0:
								<div class="text-right">@string.Format(RazorUtils.DEFAULT_CULTURE, "{0:0.0000}", enemy.HP / upgrade.DefaultSpray)</div>
								break;
							case 1:
								<div class="text-right">@Math.Ceiling(enemy.HP / upgrade.DefaultShot)</div>
								break;
							case 2:
								if (upgrade.Level == 3)
								{
									<div class="text-right">@(enemy.Homing3 == null ? "N/A" : string.Format(RazorUtils.DEFAULT_CULTURE, "{0:0.##}", (double)enemy.Homing3))</div>
								}
								else if (upgrade.Level == 4)
								{
									<div class="text-right">@(enemy.Homing4 == null ? "N/A" : string.Format(RazorUtils.DEFAULT_CULTURE, "{0:0.##}", (double)enemy.Homing4))</div>
								}
								else
								{
									<div class="text-right">N/A</div>
								}
								break;
						}
					}
				</div>
			}

			if (enemy.HitPartCount != 1)
			{
				<div class="damage-stats-row damage-stats-row-main flex-container hidden-xs">
					<div>@Html.Raw(RazorUtils.GetEnemyLayoutAnchor(enemy)) (Gem)</div>
					<div class="text-right">@(enemy.HP / enemy.HitPartCount)</div>
					@for (int i = 0; i < 3; i++)
					{
						foreach (Upgrade upgrade in GameHelper.Upgrades)
						{
							switch (i)
							{
								case 0:
									<div class="hidden-sm hidden-md text-right">@string.Format(RazorUtils.DEFAULT_CULTURE, "{0:0.0000}", enemy.HP / upgrade.DefaultSpray / enemy.HitPartCount)</div>
									break;
								case 1:
									<div class="hidden-sm hidden-md text-right">@Math.Ceiling(enemy.HP / upgrade.DefaultShot / enemy.HitPartCount)</div>
									break;
								case 2:
									if (upgrade.Level == 3)
									{
										<div class="hidden-sm hidden-md text-right">@(enemy.Homing3 == null ? "N/A" : string.Format(RazorUtils.DEFAULT_CULTURE, "{0:0.##}", (double)enemy.Homing3 / enemy.HitPartCount))</div>
									}
									else if (upgrade.Level == 4)
									{
										<div class="hidden-sm hidden-md text-right">@(enemy.Homing4 == null ? "N/A" : string.Format(RazorUtils.DEFAULT_CULTURE, "{0:0.##}", (double)enemy.Homing4 / enemy.HitPartCount))</div>
									}
									break;
							}
						}
					}

					@foreach (Upgrade upgrade in GameHelper.Upgrades)
					{
						<div class="hidden-lg text-right">
							@Html.Raw(RazorUtils.GetUpgradeLayoutAnchor(upgrade))
						</div>
					}
				</div>

				<div class="visible-xs">
					<div class="damage-stats-row damage-stats-row-main flex-container">
						<div>Name</div>
						<div class="text-right">@Html.Raw(RazorUtils.GetEnemyLayoutAnchor(enemy)) (Gem)</div>
					</div>
					<div class="damage-stats-row flex-container">
						<div>HP</div>
						<div class="text-right">@(enemy.HP / enemy.HitPartCount)</div>
					</div>

					@for (int i = 0; i < 3; i++)
					{
						foreach (Upgrade upgrade in GameHelper.Upgrades)
						{
							switch (i)
							{
								case 0:
									<div class="damage-stats-row flex-container">
										<div>@Html.Raw(RazorUtils.GetUpgradeLayoutAnchor(upgrade)) spray (seconds)</div>
										<div class="text-right">@string.Format(RazorUtils.DEFAULT_CULTURE, "{0:0.0000}", enemy.HP / upgrade.DefaultSpray / enemy.HitPartCount)</div>
									</div>
									break;
								case 1:
									<div class="damage-stats-row flex-container">
										<div>@Html.Raw(RazorUtils.GetUpgradeLayoutAnchor(upgrade)) shots</div>
										<div class="text-right">@Math.Ceiling(enemy.HP / upgrade.DefaultShot / enemy.HitPartCount)</div>
									</div>
									break;
								case 2:
									<div class="damage-stats-row flex-container">
										@if (upgrade.Level == 3)
										{
											<div>@Html.Raw(RazorUtils.GetUpgradeLayoutAnchor(upgrade)) homing daggers</div>
											<div class="text-right">@(enemy.Homing3 == null ? "N/A" : string.Format(RazorUtils.DEFAULT_CULTURE, "{0:0.##}", (double)enemy.Homing3 / enemy.HitPartCount))</div>
										}
										else if (upgrade.Level == 4)
										{
											<div>@Html.Raw(RazorUtils.GetUpgradeLayoutAnchor(upgrade)) homing daggers</div>
											<div class="text-right">@(enemy.Homing4 == null ? "N/A" : string.Format(RazorUtils.DEFAULT_CULTURE, "{0:0.##}", (double)enemy.Homing4 / enemy.HitPartCount))</div>
										}
									</div>
									break;
							}
						}
					}
				</div>

				@for (int i = 0; i < 3; i++)
				{
					<div class="damage-stats-row flex-container hidden-xs hidden-lg">
						<div>@(i == 0 ? "Spray (seconds)" : i == 1 ? "Shots" : "Homing daggers")</div>
						<div></div>
						@foreach (Upgrade upgrade in GameHelper.Upgrades)
						{
							switch (i)
							{
								case 0:
									<div class="text-right">@string.Format(RazorUtils.DEFAULT_CULTURE, "{0:0.0000}", enemy.HP / upgrade.DefaultSpray / enemy.HitPartCount)</div>
									break;
								case 1:
									<div class="text-right">@Math.Ceiling(enemy.HP / upgrade.DefaultShot / enemy.HitPartCount)</div>
									break;
								case 2:
									if (upgrade.Level == 3)
									{
										<div class="text-right">@(enemy.Homing3 == null ? "N/A" : string.Format(RazorUtils.DEFAULT_CULTURE, "{0:0.##}", (double)enemy.Homing3 / enemy.HitPartCount))</div>
									}
									else if (upgrade.Level == 4)
									{
										<div class="text-right">@(enemy.Homing4 == null ? "N/A" : string.Format(RazorUtils.DEFAULT_CULTURE, "{0:0.##}", (double)enemy.Homing4 / enemy.HitPartCount))</div>
									}
									else
									{
										<div class="text-right">N/A</div>
									}
									break;
							}
						}
					</div>
				}
			}
		}
	</div>

	<h2 class="text-center">Homing daggers</h2>
	<ul>
		@Html.Raw(RazorUtils.GetLayout(@"
		<li>All homing daggers cause 10 damage to most enemies.</li>
		<li>Leviathan, The Orb, Spider Egg I, and Spider Egg II only take 1 damage from homing daggers.</li>
		<li>The Orb, Spider Egg I, and Spider Egg II are the only enemies that are not targeted by any homing daggers.</li>
		<li>Level 4 homing daggers cause splash damage. This means that when they're destroyed, they create a little explosion that can cause damage (most likely 10) to near enemies. For example, you only need one Level 4 homing dagger to kill a Squid II, as the explosion will destroy the other gem.</li>
		<li>Not sure why you need 3 Level 4 homing daggers to kill a Squid III gem, but only 1 Level 3 homing dagger... Seems like a bug.</li>
		<li>Also not sure why you need 10 Level 4 homing daggers to kill a single Transmuted Skull I, while one single Level 3 homing dagger can kill 4 of them... Probably another bug.</li>"))
	</ul>
</main>
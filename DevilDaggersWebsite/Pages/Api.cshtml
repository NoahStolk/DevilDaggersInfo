@page
@model DevilDaggersWebsite.Pages.ApiModel
@using DevilDaggersWebsite.Code.Api
@using DevilDaggersWebsite.Code.Utils
@{
	ViewData["Title"] = "API Overview";
}

<h1>@ViewData["Title"]</h1>

<main role="main">
	<p>
		This is the main page for the API for DevilDaggers.info.
		All API functions currently available can be found here.
	</p>
	<p>
		I mainly set this up so I could easily communicate with the website through external environments, such as within <a asp-page="/Tools/DevilDaggersSurvivalEditor">DevilDaggersSurvivalEditor</a> or Discord bots.
		However, this is a public API; feel free to use it for any tool or application you've made yourself.
		I'd also be happy to implement more functions should anyone need it, so let me know if you have any requests.
	</p>
	<p>
		This table is automatically generated and will always be up to date.
	</p>

	<h2>Endpoints</h2>
	<div class="api-list">
		<div class="row text-bold">
			<div class="col-lg-3 col-md-3 col-sm-6 col-xs-6">Name</div>
			<div class="col-lg-3 col-md-3 col-sm-6 col-xs-6">Return type</div>
			<div class="col-lg-3 col-md-3 hidden-sm hidden-xs">Parameters</div>
			<div class="col-lg-3 col-md-3 hidden-sm hidden-xs">Expected tatus codes</div>
		</div>

		@{
			foreach (Endpoint endpoint in Model.Endpoints)
			{
				<div class="row">
					<div class="col-lg-3 col-md-3 col-sm-6 col-xs-6"><a asp-page=@endpoint.Url class="dont-break-out">@endpoint.Url</a></div>
					<div class="col-lg-3 col-md-3 col-sm-6 col-xs-6">@Html.Raw(RazorUtils.GetFormattedReturnType(endpoint.ReturnType))</div>
					<div class="col-lg-3 col-md-3 hidden-sm hidden-xs">@Html.Raw(string.Join(", ", endpoint.Parameters.Select(p => p.FormattedDescription.ToString().Trim())))</div>
					<div class="col-lg-3 col-md-3 hidden-sm hidden-xs">@string.Join(", ", endpoint.StatusCodes)</div>
				</div>
			}
		}
	</div>
</main>

@section Styles {
	<link rel='stylesheet' href='~/styles/api.css' />
}
<div class="p-2 rounded @BackgroundColorClass">
	@if (Title != null)
	{
		<h4 class="text-xl">@Title</h4>
	}

	@ChildContent

	@if (DismissEvent != null)
	{
		<p>
			<button class="btn @ButtonColorClass w-20 py-1" @onclick="() => DismissEvent.Invoke()">Dismiss</button>
		</p>
	}
</div>

@code
{
	[Parameter] public string? Title { get; set; }
	[Parameter, EditorRequired] public RenderFragment ChildContent { get; set; } = null!;
	[Parameter, EditorRequired] public ResultBarType ResultBarType { get; set; }
	[Parameter] public Action? DismissEvent { get; set; }

	public string BackgroundColorClass => ResultBarType switch
	{
		ResultBarType.Success => "bg-dark-green",
		ResultBarType.ValidationError => "bg-dark-orange",
		ResultBarType.FatalError => "bg-dark-red",
		_ => string.Empty,
	};

	public string ButtonColorClass => ResultBarType switch
	{
		ResultBarType.Success => "btn-green",
		ResultBarType.ValidationError => "btn-orange",
		ResultBarType.FatalError => "btn-red",
		_ => string.Empty,
	};

	[Parameter]
	public EventCallback<string?> MessageChanged { get; set; }
}

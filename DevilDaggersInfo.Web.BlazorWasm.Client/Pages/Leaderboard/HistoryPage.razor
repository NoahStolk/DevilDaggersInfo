@page "/leaderboard/history"
@inject PublicApiHttpClient Http
@inject NavigationManager NavigationManager
@using DevilDaggersInfo.Core.Wiki
@using DevilDaggersInfo.Core.Wiki.Enums
@using DevilDaggersInfo.Web.BlazorWasm.Client.Components.Leaderboards
@using DevilDaggersInfo.Web.BlazorWasm.Client.Components.Leaderboards.History
@using DevilDaggersInfo.Web.BlazorWasm.Shared.Dto.Public
@using DevilDaggersInfo.Web.BlazorWasm.Shared.Dto.Public.LeaderboardHistory
@using DevilDaggersInfo.Web.BlazorWasm.Shared.Dto.Public.Players

<Heading Title="Leaderboard History" />

@if (GetLeaderboardHistory == null)
{
	<Loading />
}
else
{
	<div>
		<DatePicker DateSelected="@(d => UpdateDateTime(d))" />

		@if (_reloading)
		{
			<Loading />
		}
	</div>

	<Heading Level="2" Title="@(GetLeaderboardHistory.DateTime.ToString(FormatUtils.DateTimeFormat))" />
	@if (!DatesEqual(GetLeaderboardHistory.DateTime, _dateTime))
	{
		<i>Closest hit for @(_dateTime.ToString(FormatUtils.DateTimeFormat))</i>
	}

	<LeaderboardGlobal Leaderboard="GetLeaderboardHistory" IsHistory="true" />
	<LeaderboardTableInfo />
	<LeaderboardTable TGetLeaderboardDto="GetLeaderboardHistory" TGetEntryDto="GetEntryHistory" Leaderboard="GetLeaderboardHistory" Players="Players" IsHistory="true" GameVersion="_gameVersion" />
}

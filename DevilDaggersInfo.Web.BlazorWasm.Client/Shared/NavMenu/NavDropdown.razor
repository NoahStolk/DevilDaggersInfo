<li class="pl-3 py-1 whitespace-nowrap overflow-x-hidden text-xl">
	<div class="cursor-pointer select-none hover:text-white" @onclick="Show">
		<NavIcon Type="@(ShowList ? "chevron-bottom" : IconType)" Text="@Text" />
	</div>
	@if (ShowList)
	{
		<ul class="pt-1">
			@ChildContent
		</ul>
	}
</li>

@code
{
	private bool _showList;
	public bool ShowList
	{
		get => _showList;
		set
		{
			_showList = value;
			StateHasChanged();
		}
	}

	[CascadingParameter] public NavMenu NavMenu { get; set; } = null!;

	[Parameter, EditorRequired] public RenderFragment ChildContent { get; set; } = null!;
	[Parameter, EditorRequired] public string Text { get; set; } = null!;
	[Parameter, EditorRequired] public string IconType { get; set; } = null!;

	protected override void OnInitialized()
	{
		NavMenu.NavDropdowns.Add(this);
	}

	private void Show()
	{
		if (ShowList)
			ShowList = false;
		else
			NavMenu.ShowSubMenu(this);
	}
}

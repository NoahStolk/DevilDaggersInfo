<li class="@GetPaddingClass() transition-spacing duration-150 ease-in-out py-1 whitespace-nowrap overflow-x-hidden @CssClass">
	<NavLink class="block w-full" href="@Href" Match="Match" @onclick="CloseMenu">
		<NavIcon Type="@IconType" Text="@Text" />
	</NavLink>
</li>

@code
{
	[CascadingParameter] public NavMenu NavMenu { get; set; } = null!;

	[Parameter, EditorRequired] public string Href { get; set; } = null!;
	[Parameter] public string? CssClass { get; set; }
	[Parameter, EditorRequired] public string IconType { get; set; } = null!;
	[Parameter, EditorRequired] public string Text { get; set; } = null!;
	[Parameter] public NavLinkMatch Match { get; set; }
	[Parameter] public bool InDropdown { get; set; } = true;

	private string? GetPaddingClass()
	{
		const string pad = "pl-3";

		if (!InDropdown || NavMenu.ExpandNavMenu)
			return pad;

		if (NavMenu.ShowNavMenuMobile)
			return $"{pad} sm:pl-0";

		return null;
	}

	private void CloseMenu()
	{
		NavMenu.ShowNavMenuMobile = false;
		NavMenu.UpdateState();
	}
}
